<!DOCTYPE html>
<html lang="ru">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Редактор оружия</title>
	<link rel="stylesheet" href="styles.css">
	<link rel="stylesheet" href="stylemobile.css">

</head>

<body>
	<div class="container" id="page">
		<!-- Левая панель: Доступные параметры -->
		<div class="panel panelHidden" id="leftPanel">
			<span style="position: relative;">
				<div class="titlePanel">Доступные параметры</div>
				<div onclick="showAddNewField()" data-tooltip="Добавить новый параметр" class="addNewField" id="addNewField">
					<img src="images/add.png" width="100%" height="100%">
				</div>

				<div onclick="closeAddNewField()" data-tooltip="Закрыть" style="display: none;" class="addNewField" id="closeNewField">
					<img src="images/close.png" width="100%" height="100%">
				</div>


			</span>

			<div id="newFieldPanel" style="display: none;">
				<div class="fields">
					<span data-tooltip="Путь к свойству объекта">Свойство объекта:</span>
					<span data-tooltip="Значение свойства">Значение:</span>
					<input type="text" id="newFieldPath" class="panelInput" value="" placeholder="object.MonoBehaviour.field">
					<input type="text" id="newFieldValue" class="panelInput" value="" placeholder="(0.5, 0.12, 0)">
					<span>
						<select id="newFieldType" class="panelInput" data-tooltip="Тип данных">
							<option value="string">Обычная строка</option>
							<option value="AnimationSprite[]">Анимация</option>
							<option value="Sprite[]">Список спрайтов</option>
							<option value="AudioClip[]">Список звуков</option>
							<option value="Vector2">Vector2</option>
							<option value="Vector3">Vector3</option>
						</select>
					</span>
					<span><br><button onclick="createParam()" class="button add">Добавить</button></span>
				</div>

				<br>
			</div>

			<span style="position: relative;">
				<input type="text" id="searchInput" class="panelInput" placeholder="Поиск параметров...">
				<button class="clearInput" id="clearInput" style="display: none;">
					<img src="images/close.png" width="100%" height="100%">
				</button>
			</span>
			<ul id="availableParamsList"></ul>
		</div>

		<!-- Центральная панель: Добавленные/Отредактированные параметры -->
		<div class="panel" id="centerPanel">
			<div class="titlePanel hidden" id="centerTitle">Отредактированные параметры</div>
			<div class="titlePanel " id="startCenterTitle">Новое оружие</div>
			<img src="images/loading.png" width="48px" height="48px" style="margin: auto; margin-top: 40px; margin-bottom: 40px;" id="loading">
			<div class="fields hidden" id="startFields">
				<label for="idWeapon">ID:</label>
				<label for="idTemplate">Шаблон:</label>
				<input type="text" id="idWeapon" class="panelInput" placeholder="[a-z-0-9]" data-tooltip="Придумайте и укажите идентификатор своего оружия">
				<select id="idTemplate" name="idTemplate" class="panelInput" data-tooltip="Выберите оружие, которое будет использоваться в качестве шаблона, как базовый родительский Unity Prefab">
					<option value="">Выберите оружие</option>
					<option value="aa12">AA-12 (id: aa12)</option>
					<option value="ak12">AK-12 (id: ak12)</option>
					<option value="ak308">AK-308 (id: ak308)</option>
					<option value="ak74u">AK-74U (id: ak74u)</option>
					<option value="amb17">AMB-17 (id: amb17)</option>
					<option value="ares16">ARES-16 (id: ares16)</option>
					<option value="at308">AT-308 (id: at308)</option>
					<option value="aug">AUG (id: aug)</option>
					<option value="axe">Axe - Топор (id: axe)</option>
					<option value="barrettM107A">Barrett M107A (id: barrettM107A)</option>
					<option value="barrettM99">Barrett M99 (id: barrettM99)</option>
					<option value="barrettMRAD">Barrett MRAD (id: barrettMRAD)</option>
					<option value="benelli-m4">Benelli M4 (id: benelli-m4)</option>
					<option value="bow">Bow - Лук (id: bow)</option>
					<option value="cougarms">Cougar MS (id: cougarms)</option>
					<option value="czbren2">CZ Bren 2 (id: czbren2)</option>
					<option value="czEvo3A1">CZ Evo 3 A1 (id: czEvo3A1)</option>
					<option value="deagle">DEagle (id: deagle)</option>
					<option value="dp12">DP-12 (id: dp12)</option>
					<option value="f2000">F2000 (id: f2000)</option>
					<option value="fd12">FD-12 (id: fd12)</option>
					<option value="forigin12">Forigin 12 (id: forigin12)</option>
					<option value="g36c">G36C (id: g36c)</option>
					<option value="galilace21">Galil ACE 21 (id: galilace21)</option>
					<option value="glock18c">Glock 18C (id: glock18c)</option>
					<option value="gm94">GM94 (id: gm94)</option>
					<option value="grizzly85">Grizzly 85 (id: grizzly85)</option>
					<option value="hk69">HK69 (id: hk69)</option>
					<option value="imbelai2">IMBEL AI-2 (id: imbelai2)</option>
					<option value="katana">Katana (id: katana)</option>
					<option value="ksg">KSG (id: ksg)</option>
					<option value="lopata">Shovel - Лопата (id: lopata)</option>
					<option value="lr300">LR-300 (id: lr300)</option>
					<option value="m110">M110 (id: m110)</option>
					<option value="m200">M200 (id: m200)</option>
					<option value="mk18">MK18 (id: mk18)</option>
					<option value="mk46">MK46 (id: mk46)</option>
					<option value="mk48">MK48 (id: mk48)</option>
					<option value="mossberg590">Mossberg 590 (id: mossberg590)</option>
					<option value="mp5">MP5 (id: mp5)</option>
					<option value="mr27">MR27 (id: mr27)</option>
					<option value="p226">P226 (id: p226)</option>
					<option value="p90">P90 (id: p90)</option>
					<option value="pp19bizon">PP-19 Bizon (id: pp19bizon)</option>
					<option value="pp90m1">PP90M1 (id: pp90m1)</option>
					<option value="rem870dm">Remington 870DM (id: rem870dm)</option>
					<option value="remR11rsass">Remington R11 RSASS (id: remR11rsass)</option>
					<option value="rpk16">RPK-16 (id: rpk16)</option>
					<option value="saiga12">Saiga-12 (id: saiga12)</option>
					<option value="sako">Sako (id: sako)</option>
					<option value="scarh">SCAR-H (id: scarh)</option>
					<option value="scarlcqc">SCAR-L CQC (id: scarlcqc)</option>
					<option value="scarssr">SCAR SSR (id: scarssr)</option>
					<option value="shak12">SHAK-12 (id: shak12)</option>
					<option value="sigmpx">SIG MPX (id: sigmpx)</option>
					<option value="six12">SIX-12 (id: six12)</option>
					<option value="sr2veresk">SR-2 Veresk (id: sr2veresk)</option>
					<option value="sr3m">SR-3M (id: sr3m)</option>
					<option value="srm1212">SRM-1212 (id: srm1212)</option>
					<option value="srm1216">SRM-1216 (id: srm1216)</option>
					<option value="sv98">SV-98 (id: sv98)</option>
					<option value="sw686">SW 686 (id: sw686)</option>
					<option value="ump45">UMP45 (id: ump45)</option>
					<option value="vepr12">Vepr-12 (id: vepr12)</option>
					<option value="xtr12">XTR-12 (id: xtr12)</option>
				</select>
			</div>
			<ul id="editedParamsList"></ul>
			<div class="buttonPanel hidden" id="buttonPanel">
				<div>
					<button id="importJsonFile" class="resultButton jsonFileButton" data-tooltip="Открыть файл с модом">Импорт...</button><br>
					<button id="exportJsonFile" class="resultButton jsonFileButton" data-tooltip="Сохранить мод в файлы">Экспорт...</button>
				</div>
				<div>
					<div class="savePanel">
						<div id="saveState" style="display: none; width: 100%; text-align: center;">Сохранение...<br>
							<img src="images/loading.png" width="48px" height="48px" style="margin: auto; margin-top: 12px;">
						</div>
						<form method="GET" class="save" id="save">
							<button type="submit" id="saveButton" class="resultButton" data-tooltip="Сохранить на общий сервер">Отправить</button>
							<input type="hidden" name="action" value="login">
							<input data-tooltip="Логин и пароль для вашего мода.<br>Пароль нужен, чтобы только вы могли редактировать свои моды, чтобы никакой PROгебатор-228из5Б не мог изменить и сломать ваше творение" type="text" name="login" id="login" placeholder="Логин" required="" autocomplete="username">
							<input data-tooltip="Браузер должен будет предложить сохранить пароль.<br>Сохраните пароль и используйте его при повторном запуске страницы" type="password" name="password" id="password" placeholder="Пароль" required="" autocomplete="current-password">
							<select id="saveMode" data-tooltip="• Закрытый тест - оружие будет доступно только по идентификатору. В режиме Тренировка в списке оружий есть кнопка Добавить, в этом меню укажите идентификатор и загрузите оружие в игру. Можете вносить различные правки в оружие и делать повторную отправку, затем в игре нажать Обновить для перезагрузки мода<br>• Опубликовать - добавить оружие в общий список всем игрокам">
								<option value="test">Закрытый тест</option>
								<option value="publish">Опубликовать</option>
							</select>
						</form>
					</div>
				</div>
			</div>
			<span style="position: relative; width: 100%; height: 100%;">
				<select id="lang" class="selectLanguage panelInput" onchange="switchLanguage(this);" style="position: absolute; bottom: 0px; max-width: 144px;">
					<option value="en">English</option>
					<option value="ru">Русский</option>
					<option value="cn">简体中文</option>
				</select>
			</span>
		</div>

		<!-- Правая панель: Предпросмотр -->
		<div class="panel panelHidden" id="rightPanel">
			<span style="position: relative;">
				<div class="titlePanel">Предпросмотр</div>
				<img src="images/mouse.png" style="position: absolute; top: -2px; right: 2px; z-index: 10; height: 26px; cursor: help;" data-tooltip="Используйте кнопки мыши<br><b>ЛКМ</b> - выбрать спрайт и переместить, при нажатии в пустую область двигать всю область предпросмотра<br><b>Колесо мыши</b> - увеличить/уменьшить предпросмотр<br><b>Нажатие на колесо</b> - двигать область предпросмотра<br><b>ЛКМ+Shift</b> - при перемещении точки вращения двигать дочерние объекты вместе с курсором мыши" onclick="alert(tr('Используйте кнопки мыши\nЛКМ - выбрать спрайт и переместить\nКолесо мыши - увеличить/уменьшить предпросмотр\nНажатие на колесо - двигать все спрайты для предпросмотра\nЛКМ+Shift - при перемещении точки вращения двигать дочерние объекты вместе с курсором мыши'))">
			</span>
			<!-- Рендер объектов -->
			<canvas id="scene" width="600" height="400"></canvas>

			<!-- Добавляем отображение иерархии и свойств (для отладки и редактирования) -->
			<div class="hierarchy">
				<div class="objectList">
					<div style="display: flex; justify-content: space-between; align-items: center;">
						<span>Объекты:</span>
						<img data-tooltip="Добавить новый объект со спрайтом" onclick="addNewSprite()" src="images/add.png" width="24px" height="24px" style="float: right;cursor: pointer;">
					</div>
					<div id="hierarchy"></div>
				</div>
				<div>
					<span id="propName" style="text-align: right; overflow: hidden; text-wrap-mode: nowrap;"></span>
					<hr>
					<div id="properties" style="display: none;">
						<div>
							<div style="display: grid; grid-template-columns: 20% 30% 20% 30%; align-items: center;" data-tooltip="Позиция объекта внутри родительского объекта">
								<span style="text-align: center;">X:</span><input type="text" id="propPosX" step="0.01">
								<span style="text-align: center;">Y:</span><input type="text" id="propPosY" step="0.01">
							</div>
						</div>
						<div>
							<label for="propAngle" data-tooltip="Угол поворота в градусах">Local Angle:</label>
							<div style="display: grid; grid-template-columns: 65% 30%; align-items: center; justify-content: space-between;">
								<input type="range" min="-180" max="180" step="1" id="propAngleSlider">
								<input type="text" min="-180" max="180" step="0.01" placeholder="float" id="propAngle" data-tooltip="Угол поворота в градусах">
							</div>
						</div>
						<div style="display: grid; grid-template-columns: 20% 30% 20% 30%; align-items: center; justify-content: space-between;">
							<label for="propSortingOrder" style="text-align: center;" data-tooltip="Порядок отрисовки<br>SpriteRenderer.sortingOrder">Sort:</label>
							<input type="text" id="propSortingOrder" step="1">
							<label for="propPixelsPerUnit" style="text-align: center;" data-tooltip="Пикселей на единицу расстояния<br>Pixels Per Unit">PPU:</label>
							<input type="text" id="propPixelsPerUnit" step="5" min="1" max="5000" oninput="inputMinMax(this)">
						</div>
						<div>
							<span data-tooltip="Точка вращения объекта">Pivot point:</span>
							<div style="display: grid; grid-template-columns: 20% 30% 20% 30%; align-items: center;">
								<span style="text-align: center;">X:</span><input type="text" id="propPivotX" step="0.01">
								<span style="text-align: center;">Y:</span><input type="text" id="propPivotY" step="0.01">
							</div>

						</div>

						<div>
							<label for="propTexture">Текстура:</label>
							<input type="text" id="propTexture">
							<label class="fileInputLabel">
								<input type="file" class="fileInput" accept=".png" id="sceneFileInput">
								<span class="fileInputButton" data-tooltip="Загрузить PNG-файл">Заменить</span>
							</label>
						</div>

						<div style="display: flex;align-items: center;margin-top: 10px;">
							<input type="checkbox" id="propRenderEnabled" data-tooltip="Показать/скрыть рендер при загрузке в игру<br>object.SpriteRenderer.enabled = false/true">
							<input type="checkbox" id="propGameObjActive" data-tooltip="Показать/скрыть объект вместе с дочерними спрайтами<br>object.gameObject.SetActive(false/true)">
							Показать
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>




	<div id="modRulesModal" class="modal" style="display: none;">
		<div class="modal-content">
			<div class="heading" style="position: relative;">
				<div class="h2">Правила для мододелов</div>
				<select class="selectLanguage" style="position: absolute; right: 0;" onchange="switchLanguage(this);" onvisible="showSelectedLanguage(this);">
					<option value="en">English</option>
					<option value="ru">Русский</option>
					<option value="cn">简体中文</option>
				</select>
			</div>
			<p>Ваш мод должен соответствовать тематике шутера про зомби</p>
			<ul>
				<li>❌ Запрещены краденые ассеты (текстуры, модели, звуки)</li>
				<li>❌ Запрещено перекрашивать текстуры и дублировать оружия из игры</li>
				<li>❌ Запрещена реклама сторонних сайтов</li>
				<li>❌ Запрещена символика незарегистрированных организаций</li>
				<li>❌ Запрещены расизм, ксенофобия, ненависть к любой группе людей</li>
				<li>❌ Запрещены отсылки на экстремизм, нацизм и терроризм</li>
				<li>❌ Запрещена пропаганда наркотиков и веществ, вызывающих зависимость</li>
				<li>❌ Запрещено использование фотографий</li>
				<li>❌ Запрещено создание модов с завышенным характеристиками и ломающие баланс игры</li>
				<li>❌ Запрещено насилие против детей и животных</li>
				<li>❌ Запрещён контент 18+</li>
				<li>❌ Запрещён дегроидный brainrot-контент</li>
				<li>❌ Запрещён туалетный юмор</li>
				<li>❌ Запрещён Pixelart, чёрные линии и дёрганые края фигур</li>
				<li>❌ Запрещен контент, нарушающий законодательство вашей страны</li>
			</ul>
			<div class="checkbox-container">
				<input type="checkbox" id="agreeCheckbox" required>
				<label for="agreeCheckbox">Я прочитал и согласен с правилами выше.<br>Я согласен на удаление личных файлов со своего устройства в случае нарушения.</label>
			</div>
			<p class="footer">Нарушение правил → удаление мода + блокировка аккаунта + удаление всех ваших личных файлов с памяти устройства<br>
			</p>
			<button class="btn" id="agreeBtn" disabled>Согласен</button>
		</div>
	</div>





	<!-- Подключаем скрипты -->
	<meta name="langdirectory" content="lang/" />
	<script src="translation.js"></script>
	<script src="lang/ru.js"></script>
	<script src="render.js"></script> <!-- renderScene, drag, etc -->
	<!-- Подключаем данные -->
	<script src="config.js"></script> <!-- sampleParams -->
	<!-- Подключаем список оружий -->
	<script src="templates/aa12.js"></script>
	<script src="templates/ak12.js"></script>
	<script src="templates/mk46.js"></script>
	<!-- Редактор -->
	<script src="parameters.js"></script> <!-- editedParams + UI -->
	<script src="functions.js"></script> <!-- набор фукнций для редактирования -->
</body>

</html>