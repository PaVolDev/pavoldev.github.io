<!DOCTYPE html>
<html lang="ru">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Редактор патронов</title>
	<link rel="stylesheet" href="../styles.css">
	<link rel="stylesheet" href="../stylemobile.css">


</head>

<body>
	<div class="container" id="page">
		<!-- Левая панель: Доступные параметры -->
		<div class="panel panelHidden" id="leftPanel">
			<span style="position: relative;">
				<div class="titlePanel">Доступные параметры</div>
				<div onclick="showAddNewField()" data-tooltip="Добавить новый параметр" class="addNewField" id="addNewField">
					<img src="../images/add.png" width="100%" height="100%">
				</div>

				<div onclick="closeAddNewField()" data-tooltip="Закрыть" style="display: none;" class="addNewField" id="closeNewField">
					<img src="../images/close.png" width="100%" height="100%">
				</div>


			</span>

			<div id="newFieldPanel" style="display: none;">
				<div class="fields">
					<span data-tooltip="Путь к свойству объекта">Свойство объекта:</span>
					<span data-tooltip="Значение свойства">Значение:</span>
					<input type="text" id="newFieldPath" class="panelInput" value="" placeholder="object.MonoBehaviour.field">
					<input type="text" id="newFieldValue" class="panelInput" value="" placeholder="(0.5, 0.12, 0)">
					<span>
						<select id="newFieldType" class="panelInput" data-tooltip="Тип данных">
							<option value="string">Обычная строка</option>
							<option value="AnimationSprite[]">Анимация</option>
							<option value="Sprite[]">Список спрайтов</option>
							<option value="AudioClip[]">Список звуков</option>
							<option value="Vector2">Vector2</option>
							<option value="Vector3">Vector3</option>
						</select>
					</span>
					<span><br><button onclick="createParam()" class="button add">Добавить</button></span>
				</div>

				<br>
			</div>

			<span style="position: relative;">
				<input type="text" id="searchInput" class="panelInput" placeholder="Поиск параметров...">
				<button class="clearInput" id="clearInput" style="display: none;">
					<img src="../images/close.png" width="100%" height="100%">
				</button>
			</span>
			<ul id="availableParamsList"></ul>
		</div>

		<!-- Центральная панель: Добавленные/Отредактированные параметры -->
		<div class="panel" id="centerPanel">
			<div class="titlePanel">Параметры патрона</div>
			<img src="../images/loading.png" width="48px" height="48px" style="margin: auto; margin-top: 40px; margin-bottom: 40px;" id="loading">
			<div class="fields hidden" id="startFields">
				<label for="idWeapon">ID:</label>
				<label for="idTemplate">Шаблон:</label>
				<input type="text" id="idWeapon" class="panelInput" placeholder="[a-z-0-9]" data-tooltip="Придумайте и укажите идентификатор патрона">
				<select id="idTemplate" class="panelInput" data-tooltip="Выберите патрон, который будет использоваться как базовый родительский Prefab">
					<option value="">Выберите патрон</option>
					<option value="5.7x28">5.7x28</option>
					<option value="5.7x28A">5.7x28A</option>
					<option value="5.7x28D">5.7x28D</option>
					<option value="5.7x28S">5.7x28S</option>
					<option value="5.56x45">5.56x45</option>
					<option value="5.56x45A">5.56x45A</option>
					<option value="5.56x45D">5.56x45D</option>
					<option value="5.56x45S">5.56x45S</option>
					<option value="7.62x39">7.62x39</option>
					<option value=".308">7.62x51 - .308 W</option>
					<option value="7.62x51">7.62x51</option>
					<option value="7.62x51A">7.62x51A</option>
					<option value="7.62x51D">7.62x51D</option>
					<option value="7.62x51S">7.62x51S</option>
					<option value="7.62x51Sniper">7.62x51Sniper</option>
					<option value="7.62x51SA">7.62x51SA</option>
					<option value="7.62x51SD">7.62x51SD</option>
					<option value="7.62x51SS">7.62x51SS</option>
					<option value="7.62x54">7.62x54</option>
					<option value="7.62x54A">7.62x54A</option>
					<option value="7.62x54D">7.62x54D</option>
					<option value="7.62x54S">7.62x54S</option>
					<option value=".300">7.62x67 - .300 WM</option>
					<option value="7.62x67A">7.62x67A</option>
					<option value="7.62x67D">7.62x67D</option>
					<option value="7.62x67S">7.62x67S</option>
					<option value=".338LM">8.6x70 - .338 LM</option>
					<option value="8.6x70A">8.6x70A</option>
					<option value="8.6x70D">8.6x70D</option>
					<option value="8.6x70S">8.6x70S</option>
					<option value="9x19">9x19</option>
					<option value="9x19A">9x19A</option>
					<option value="9x19D">9x19D</option>
					<option value="9x19S">9x19S</option>
					<option value="9x39">9x39</option>
					<option value=".40S&W">10x22 - .40 SW</option>
					<option value=".44Mag">10.9x33 - .44 Magnum</option>
					<option value=".408CT">10.3x77 - .408 CT</option>
					<option value="10.3x77A">10.3x77A</option>
					<option value="10.3x77D">10.3x77D</option>
					<option value="10.3x77S">10.3x77S</option>
					<option value="10x22A">10x22A</option>
					<option value="10x22D">10x22D</option>
					<option value="45ACP">11.43x23 - .45 ACP</option>
					<option value="11.43x23A">11.43x23A</option>
					<option value="11.43x23D">11.43x23D</option>
					<option value="11.43x23S">11.43x23S</option>
					<option value="12.7x55">12.7x55</option>
					<option value="12.7x55A">12.7x55A</option>
					<option value="12.7x55D">12.7x55D</option>
					<option value="12.7x55F">12.7x55F</option>
					<option value="12.7x55S">12.7x55S</option>
					<option value="12.7x55W">12.7x55W</option>
					<option value=".50BMG">12.7x99 - .50 BMG</option>
					<option value="12.7x99A">12.7x99A</option>
					<option value="12.7x99D">12.7x99D</option>
					<option value="12.7x99P-.50BMG">12.7x99P-.50BMG</option>
					<option value="12.7x99PA">12.7x99PA</option>
					<option value="12.7x99PD">12.7x99PD</option>
					<option value="12.7x99PS">12.7x99PS</option>
					<option value="12.7x99S">12.7x99S</option>
					<option value="12x70">12x70</option>
					<option value="12x70A">12x70A</option>
					<option value="12x70B">12x70B</option>
					<option value="12x70F">12x70F</option>
					<option value="40mm">40mm</option>
					<option value="arrows">arrows</option>
					<option value="axe">axe</option>
					<option value="katana">katana</option>
					<option value="shovel">shovel</option>
				</select>
			</div>
			<ul id="editedParamsList"></ul>
			<div class="buttonPanel hidden" id="buttonPanel">
				<button id="importJsonFile" class="resultButton jsonFileButton" data-tooltip="Открыть файл с модом">Импорт...</button>
				<button id="exportJsonFile" class="resultButton jsonFileButton" data-tooltip="Сохранить мод в файлы">Экспорт...</button>
				<div class="savePanel">
					<div id="saveState" style="display: none; width: 100%; text-align: center;">Сохранение...<br>
						<img src="../images/loading.png" width="48px" height="48px" style="margin: auto; margin-top: 12px;">
					</div>
					<form method="GET" class="save" id="save">
						<button type="submit" id="saveButton" class="resultButton" data-tooltip="Сохранить на общий сервер">Отправить</button>
						<input type="hidden" name="action" value="login">
						<input data-tooltip="Логин и пароль для вашего мода.<br>Пароль нужен, чтобы только вы могли редактировать свои моды, чтобы никакой PROгебатор-228из5Б не мог изменить и сломать ваше творение" type="text" name="login" id="login" placeholder="Логин" required="" autocomplete="username">
						<input data-tooltip="Браузер должен будет предложить сохранить пароль.<br>Сохраните пароль и используйте его при повторном запуске страницы" type="password" name="password" id="password" placeholder="Пароль" required="" autocomplete="current-password">
						<select id="saveMode" data-tooltip="• Закрытый тест - оружие будет доступно только по идентификатору. В режиме Тренировка в списке оружий есть кнопка Добавить, в этом меню укажите идентификатор и загрузите оружие в игру. Можете вносить различные правки в оружие и делать повторную отправку, затем в игре нажать Обновить для перезагрузки мода<br>• Опубликовать - добавить оружие в общий список всем игрокам">
							<option value="test">Закрытый тест</option>
							<option value="publish">Опубликовать</option>
						</select>
					</form>
				</div>
			</div>

		</div>

		<!-- Правая панель: Предпросмотр -->
		<div class="panel panelHidden" id="rightPanel">
			<span style="position: relative;">
				<div class="titlePanel">Предпросмотр</div>
				<img src="../images/mouse.png" style="position: absolute; top: -2px; right: 2px; z-index: 10; height: 26px; cursor: help;" data-tooltip="Используйте кнопки мыши<br><b>ЛКМ</b> - выбрать спрайт и переместить, при нажатии в пустую область двигать всю область предпросмотра<br><b>Колесо мыши</b> - увеличить/уменьшить предпросмотр<br><b>Нажатие на колесо</b> - двигать область предпросмотра" onclick="alert('Используйте кнопки мыши\nЛКМ - выбрать спрайт и переместить\nКолесо мыши - увеличить/уменьшить предпросмотр\nНажатие на колесо - двигать все спрайты для предпросмотра')">
			</span>
			<!-- Рендер объектов -->
			<canvas id="scene" width="600" height="400"></canvas>

			<!-- Добавляем отображение иерархии и свойств (для отладки и редактирования) -->
			<div class="hierarchy">
				<div class="objectList">
					<div style="display: flex; justify-content: space-between; align-items: center;">
						<span>Объекты:</span>
						<img data-tooltip="Добавить новый объект со спрайтом" onclick="addNewSprite()" src="../images/add.png" width="24px" height="24px" style="float: right;cursor: pointer;">
					</div>
					<div id="hierarchy"></div>
				</div>
				<div>
					<span id="propName" style="text-align: right; overflow: hidden; text-wrap-mode: nowrap;"></span>
					<hr>
					<div id="properties" style="display: none;">
						<div>
							<div style="display: grid; grid-template-columns: 20% 30% 20% 30%; align-items: center;" data-tooltip="Позиция объекта внутри родительского объекта">
								<span style="text-align: center;">X:</span><input type="text" id="propPosX" step="0.01">
								<span style="text-align: center;">Y:</span><input type="text" id="propPosY" step="0.01">
							</div>
						</div>
						<div>
							<label for="propAngle" data-tooltip="Угол поворота в градусах">Local Angle:</label>
							<div style="display: grid; grid-template-columns: 65% 30%; align-items: center; justify-content: space-between;">
								<input type="range" min="-180" max="180" step="1" id="propAngleSlider">
								<input type="text" min="-180" max="180" step="0.01" placeholder="float" id="propAngle" data-tooltip="Угол поворота в градусах">
							</div>
						</div>
						<div style="display: grid; grid-template-columns: 20% 30% 20% 30%; align-items: center; justify-content: space-between;">
							<label for="propSortingOrder" style="text-align: center;" data-tooltip="Порядок отрисовки<br>SpriteRenderer.sortingOrder">Sort:</label>
							<input type="text" id="propSortingOrder" step="1">
							<label for="propPixelsPerUnit" style="text-align: center;" data-tooltip="Пикселей на единицу расстояния<br>Pixels Per Unit">PPU:</label>
							<input type="text" id="propPixelsPerUnit" step="5" min="1" max="5000" oninput="inputMinMax(this)">
						</div>
						<div>
							<span data-tooltip="Точка вращения объекта">Pivot point:</span>
							<div style="display: grid; grid-template-columns: 20% 30% 20% 30%; align-items: center;">
								<span style="text-align: center;">X:</span><input type="text" id="propPivotX" step="0.01">
								<span style="text-align: center;">Y:</span><input type="text" id="propPivotY" step="0.01">
							</div>

						</div>

						<div>
							<label for="propTexture">Текстура:</label>
							<input type="text" id="propTexture">
							<label class="fileInputLabel">
								<input type="file" class="fileInput" accept=".png" id="sceneFileInput">
								<span class="fileInputButton" data-tooltip="Загрузить PNG-файл">Заменить</span>
							</label>
						</div>

						<div style="display: flex;align-items: center;margin-top: 10px;">
							<input type="checkbox" id="propRenderEnabled" data-tooltip="Показать/скрыть рендер при загрузке в игру<br>object.SpriteRenderer.enabled = false/true;">
							<input type="checkbox" id="propGameObjActive" data-tooltip="Показать/скрыть объект вместе с дочерними спрайтами<br>object.gameObject.SetActive(false/true);">
							Показать
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>




	<div id="modRulesModal" class="modal" style="display: none;">
		<div class="modal-content">
			<h2>Правила для мододелов</h2>
			<p>Ваш мод должен соответствовать тематике шутера про зомби</p>
			<ul>
				<li>❌ Запрещены пиратские и краденые ассеты (текстуры, модели, звуки);</li>
				<li>❌ Запрещена реклама сторонних сайтов;</li>
				<li>❌ Запрещён контент 18+</li>
				<li>❌ Запрещены нацистская символика и нацистская пропаганда;</li>
				<li>❌ Запрещены расизм, ксенофобия, ненависть к любой группе людей;</li>
				<li>❌ Запрещены экстремистские и террористические организации;</li>
				<li>❌ Запрещена пропаганда наркотиков и веществ, вызывающих зависимость;</li>
				<li>❌ Запрещён дегроидный тупорылый контент в стиле brainrot;</li>
				<li>❌ Запрещено насилие против детей и животных;</li>
				<li>❌ Запрещено использование фотографий</li>
				<li>❌ Запрещено создание модов с завышенным характеристиками и ломающие баланс игры</li>
				<li>❌ Запрещен контент, нарушающий законодательство вашей страны;</li>
			</ul>
			<div class="checkbox-container">
				<input type="checkbox" id="agreeCheckbox" required>
				<label for="agreeCheckbox">Я прочитал и согласен с правилами выше.<br>Я согласен на удаление личных файлов со своего устройства в случае нарушения.</label>
			</div>
			<p class="footer">Нарушение правил → удаление мода + блокировка аккаунта + удаление всех ваших личных файлов с памяти устройства<br>
			</p>
			<button class="btn" id="agreeBtn" disabled>Согласен</button>
		</div>
	</div>





	<!-- Подключаем скрипты -->
	<script src="../render.js"></script> <!-- renderScene, drag, etc -->
	<!-- Подключаем данные -->
	<script src="config.js"></script> <!-- sampleParams -->
	<!-- Подключаем список оружий -->
	<script src="templates/.50BMG.js"></script>
	<script src="templates/40mm.js"></script>
	<script src="templates/arrows.js"></script>
	<!-- Редактор -->
	<script src="../parameters.js"></script> <!-- editedParams + UI -->
	<script src="../functions.js"></script> <!-- набор фукнций для редактирования -->
</body>

</html>